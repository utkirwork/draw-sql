import{j as e,Q as $s,a as Ms}from"./http-CvfJw9qd.js";import{b as _s,r as u,a as ts}from"./vendor-CBH9K-97.js";import{u as Ce,L as K,a as Ls,R as Os,b as U,N as as,B as Us}from"./router-C-Z2-2Vd.js";import{c as zs}from"./store-DeMdXz7a.js";import{m as Q,P as Fe,F as Qe,C as Bs,E as Hs,a as qs,T as Ie,D as Re,H as Vs,G as Ws,b as Qs,c as Xe,d as Ge,e as Xs}from"./ui-C8OrYQcu.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))m(d);new MutationObserver(d=>{for(const n of d)if(n.type==="childList")for(const g of n.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&m(g)}).observe(document,{childList:!0,subtree:!0});function r(d){const n={};return d.integrity&&(n.integrity=d.integrity),d.referrerPolicy&&(n.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?n.credentials="include":d.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function m(d){if(d.ep)return;d.ep=!0;const n=r(d);fetch(d.href,n)}})();var $e={},Ye=_s;$e.createRoot=Ye.createRoot,$e.hydrateRoot=Ye.hydrateRoot;let Gs={data:""},Ys=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Gs,Js=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Zs=/\/\*[^]*?\*\/|  +/g,Je=/\n+/g,X=(t,o)=>{let r="",m="",d="";for(let n in t){let g=t[n];n[0]=="@"?n[1]=="i"?r=n+" "+g+";":m+=n[1]=="f"?X(g,n):n+"{"+X(g,n[1]=="k"?"":o)+"}":typeof g=="object"?m+=X(g,o?o.replace(/([^,])+/g,p=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,f=>/&/.test(f)?f.replace(/&/g,p):p?p+" "+f:f)):n):g!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),d+=X.p?X.p(n,g):n+":"+g+";")}return r+(o&&d?o+"{"+d+"}":d)+m},H={},rs=t=>{if(typeof t=="object"){let o="";for(let r in t)o+=r+rs(t[r]);return o}return t},et=(t,o,r,m,d)=>{let n=rs(t),g=H[n]||(H[n]=(f=>{let N=0,x=11;for(;N<f.length;)x=101*x+f.charCodeAt(N++)>>>0;return"go"+x})(n));if(!H[g]){let f=n!==t?t:(N=>{let x,S,T=[{}];for(;x=Js.exec(N.replace(Zs,""));)x[4]?T.shift():x[3]?(S=x[3].replace(Je," ").trim(),T.unshift(T[0][S]=T[0][S]||{})):T[0][x[1]]=x[2].replace(Je," ").trim();return T[0]})(t);H[g]=X(d?{["@keyframes "+g]:f}:f,r?"":"."+g)}let p=r&&H.g?H.g:null;return r&&(H.g=H[g]),((f,N,x,S)=>{S?N.data=N.data.replace(S,f):N.data.indexOf(f)===-1&&(N.data=x?f+N.data:N.data+f)})(H[g],o,m,p),g},st=(t,o,r)=>t.reduce((m,d,n)=>{let g=o[n];if(g&&g.call){let p=g(r),f=p&&p.props&&p.props.className||/^go/.test(p)&&p;g=f?"."+f:p&&typeof p=="object"?p.props?"":X(p,""):p===!1?"":p}return m+d+(g??"")},"");function Te(t){let o=this||{},r=t.call?t(o.p):t;return et(r.unshift?r.raw?st(r,[].slice.call(arguments,1),o.p):r.reduce((m,d)=>Object.assign(m,d&&d.call?d(o.p):d),{}):r,Ys(o.target),o.g,o.o,o.k)}let ls,Me,_e;Te.bind({g:1});let q=Te.bind({k:1});function tt(t,o,r,m){X.p=o,ls=t,Me=r,_e=m}function G(t,o){let r=this||{};return function(){let m=arguments;function d(n,g){let p=Object.assign({},n),f=p.className||d.className;r.p=Object.assign({theme:Me&&Me()},p),r.o=/ *go\d+/.test(f),p.className=Te.apply(r,m)+(f?" "+f:"");let N=t;return t[0]&&(N=p.as||t,delete p.as),_e&&N[0]&&_e(p),ls(N,p)}return d}}var at=t=>typeof t=="function",we=(t,o)=>at(t)?t(o):t,rt=(()=>{let t=0;return()=>(++t).toString()})(),is=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let o=matchMedia("(prefers-reduced-motion: reduce)");t=!o||o.matches}return t}})(),lt=20,os=(t,o)=>{switch(o.type){case 0:return{...t,toasts:[o.toast,...t.toasts].slice(0,lt)};case 1:return{...t,toasts:t.toasts.map(n=>n.id===o.toast.id?{...n,...o.toast}:n)};case 2:let{toast:r}=o;return os(t,{type:t.toasts.find(n=>n.id===r.id)?1:0,toast:r});case 3:let{toastId:m}=o;return{...t,toasts:t.toasts.map(n=>n.id===m||m===void 0?{...n,dismissed:!0,visible:!1}:n)};case 4:return o.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==o.toastId)};case 5:return{...t,pausedAt:o.time};case 6:let d=o.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(n=>({...n,pauseDuration:n.pauseDuration+d}))}}},ve=[],ee={toasts:[],pausedAt:void 0},se=t=>{ee=os(ee,t),ve.forEach(o=>{o(ee)})},it={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ot=(t={})=>{let[o,r]=u.useState(ee),m=u.useRef(ee);u.useEffect(()=>(m.current!==ee&&r(ee),ve.push(r),()=>{let n=ve.indexOf(r);n>-1&&ve.splice(n,1)}),[]);let d=o.toasts.map(n=>{var g,p,f;return{...t,...t[n.type],...n,removeDelay:n.removeDelay||((g=t[n.type])==null?void 0:g.removeDelay)||(t==null?void 0:t.removeDelay),duration:n.duration||((p=t[n.type])==null?void 0:p.duration)||(t==null?void 0:t.duration)||it[n.type],style:{...t.style,...(f=t[n.type])==null?void 0:f.style,...n.style}}});return{...o,toasts:d}},nt=(t,o="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:o,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||rt()}),he=t=>(o,r)=>{let m=nt(o,t,r);return se({type:2,toast:m}),m.id},$=(t,o)=>he("blank")(t,o);$.error=he("error");$.success=he("success");$.loading=he("loading");$.custom=he("custom");$.dismiss=t=>{se({type:3,toastId:t})};$.remove=t=>se({type:4,toastId:t});$.promise=(t,o,r)=>{let m=$.loading(o.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(d=>{let n=o.success?we(o.success,d):void 0;return n?$.success(n,{id:m,...r,...r==null?void 0:r.success}):$.dismiss(m),d}).catch(d=>{let n=o.error?we(o.error,d):void 0;n?$.error(n,{id:m,...r,...r==null?void 0:r.error}):$.dismiss(m)}),t};var dt=(t,o)=>{se({type:1,toast:{id:t,height:o}})},ct=()=>{se({type:5,time:Date.now()})},pe=new Map,mt=1e3,xt=(t,o=mt)=>{if(pe.has(t))return;let r=setTimeout(()=>{pe.delete(t),se({type:4,toastId:t})},o);pe.set(t,r)},ut=t=>{let{toasts:o,pausedAt:r}=ot(t);u.useEffect(()=>{if(r)return;let n=Date.now(),g=o.map(p=>{if(p.duration===1/0)return;let f=(p.duration||0)+p.pauseDuration-(n-p.createdAt);if(f<0){p.visible&&$.dismiss(p.id);return}return setTimeout(()=>$.dismiss(p.id),f)});return()=>{g.forEach(p=>p&&clearTimeout(p))}},[o,r]);let m=u.useCallback(()=>{r&&se({type:6,time:Date.now()})},[r]),d=u.useCallback((n,g)=>{let{reverseOrder:p=!1,gutter:f=8,defaultPosition:N}=g||{},x=o.filter(D=>(D.position||N)===(n.position||N)&&D.height),S=x.findIndex(D=>D.id===n.id),T=x.filter((D,k)=>k<S&&D.visible).length;return x.filter(D=>D.visible).slice(...p?[T+1]:[0,T]).reduce((D,k)=>D+(k.height||0)+f,0)},[o]);return u.useEffect(()=>{o.forEach(n=>{if(n.dismissed)xt(n.id,n.removeDelay);else{let g=pe.get(n.id);g&&(clearTimeout(g),pe.delete(n.id))}})},[o]),{toasts:o,handlers:{updateHeight:dt,startPause:ct,endPause:m,calculateOffset:d}}},pt=q`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ht=q`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,gt=q`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ft=G("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ht} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${gt} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,bt=q`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,yt=G("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${bt} 1s linear infinite;
`,jt=q`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Nt=q`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,vt=G("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Nt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,wt=G("div")`
  position: absolute;
`,Ct=G("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Tt=q`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kt=G("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Tt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,St=({toast:t})=>{let{icon:o,type:r,iconTheme:m}=t;return o!==void 0?typeof o=="string"?u.createElement(kt,null,o):o:r==="blank"?null:u.createElement(Ct,null,u.createElement(yt,{...m}),r!=="loading"&&u.createElement(wt,null,r==="error"?u.createElement(ft,{...m}):u.createElement(vt,{...m})))},Dt=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Et=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Pt="0%{opacity:0;} 100%{opacity:1;}",At="0%{opacity:1;} 100%{opacity:0;}",Kt=G("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ft=G("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,It=(t,o)=>{let r=t.includes("top")?1:-1,[m,d]=is()?[Pt,At]:[Dt(r),Et(r)];return{animation:o?`${q(m)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${q(d)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Rt=u.memo(({toast:t,position:o,style:r,children:m})=>{let d=t.height?It(t.position||o||"top-center",t.visible):{opacity:0},n=u.createElement(St,{toast:t}),g=u.createElement(Ft,{...t.ariaProps},we(t.message,t));return u.createElement(Kt,{className:t.className,style:{...d,...r,...t.style}},typeof m=="function"?m({icon:n,message:g}):u.createElement(u.Fragment,null,n,g))});tt(u.createElement);var $t=({id:t,className:o,style:r,onHeightUpdate:m,children:d})=>{let n=u.useCallback(g=>{if(g){let p=()=>{let f=g.getBoundingClientRect().height;m(t,f)};p(),new MutationObserver(p).observe(g,{subtree:!0,childList:!0,characterData:!0})}},[t,m]);return u.createElement("div",{ref:n,className:o,style:r},d)},Mt=(t,o)=>{let r=t.includes("top"),m=r?{top:0}:{bottom:0},d=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:is()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${o*(r?1:-1)}px)`,...m,...d}},_t=Te`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ne=16,Lt=({reverseOrder:t,position:o="top-center",toastOptions:r,gutter:m,children:d,containerStyle:n,containerClassName:g})=>{let{toasts:p,handlers:f}=ut(r);return u.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ne,left:Ne,right:Ne,bottom:Ne,pointerEvents:"none",...n},className:g,onMouseEnter:f.startPause,onMouseLeave:f.endPause},p.map(N=>{let x=N.position||o,S=f.calculateOffset(N,{reverseOrder:t,gutter:m,defaultPosition:o}),T=Mt(x,S);return u.createElement($t,{id:N.id,key:N.id,onHeightUpdate:f.updateHeight,className:N.visible?_t:"",style:T},N.type==="custom"?we(N.message,N):d?d(N):u.createElement(Rt,{toast:N,position:x}))}))};const Y=zs((t,o)=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,login:(r,m)=>{localStorage.setItem("token",m),localStorage.setItem("user",JSON.stringify(r)),t({user:r,token:m,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t({user:null,token:null,isAuthenticated:!1})},setLoading:r=>{t({isLoading:r})},checkAuth:()=>{const r=localStorage.getItem("token"),m=localStorage.getItem("user");if(r&&m)try{const d=JSON.parse(m);t({user:d,token:r,isAuthenticated:!0,isLoading:!1})}catch(d){console.error("Error parsing user data:",d),o().logout()}else t({isLoading:!1})},initializeAuth:()=>{setTimeout(()=>{o().checkAuth()},0)}})),Ke=({children:t})=>{var n,g;const{user:o,logout:r}=Y(),m=Ce(),d=()=>{r(),m("/")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsx(K,{to:"/dashboard",className:"text-xl font-bold text-gray-900",children:"DrawSQL Clone"}),e.jsxs("nav",{className:"hidden md:flex space-x-6",children:[e.jsx(K,{to:"/dashboard",className:"text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"Dashboard"}),e.jsx(K,{to:"/diagrams",className:"text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"My Diagrams"}),e.jsx(K,{to:"/templates",className:"text-gray-600 hover:text-gray-900 px-3 py-2 text-sm font-medium",children:"Templates"})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-sm font-medium",children:[(n=o==null?void 0:o.first_name)==null?void 0:n.charAt(0),(g=o==null?void 0:o.last_name)==null?void 0:g.charAt(0)]})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[o==null?void 0:o.first_name," ",o==null?void 0:o.last_name]}),e.jsx("p",{className:"text-xs text-gray-500",children:o==null?void 0:o.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{to:"/profile",className:"text-gray-400 hover:text-gray-600 p-2 rounded-md hover:bg-gray-100",title:"Profile",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 p-2 rounded-md hover:bg-gray-100",title:"Logout",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})})]})})}),e.jsx("main",{className:"flex-1",children:t})]})},Ze=({children:t})=>e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"DrawSQL Clone"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Professional Database Schema Designer"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:t})})]}),Ot=()=>e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"DrawSQL Clone"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(K,{to:"/login",className:"text-gray-600 hover:text-gray-900 px-3 py-2",children:"Login"}),e.jsx(K,{to:"/register",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Sign up"})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Beautiful database diagrams"}),e.jsx("p",{className:"text-xl text-gray-600 mb-12 max-w-3xl mx-auto",children:"Design, visualize and collaborate on entity relationship diagrams for your databases."}),e.jsxs("div",{className:"space-x-4",children:[e.jsx(K,{to:"/register",className:"inline-block bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700",children:"Get started"}),e.jsx(K,{to:"/templates",className:"inline-block bg-white text-gray-900 px-8 py-3 rounded-lg border hover:bg-gray-50",children:"View templates"})]})]})}),e.jsx("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Visual Design"}),e.jsx("p",{className:"text-gray-600",children:"Drag-and-drop interface for creating beautiful database tables."})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Real-time Collaboration"}),e.jsx("p",{className:"text-gray-600",children:"Work together with your team in real-time."})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Multiple Databases"}),e.jsx("p",{className:"text-gray-600",children:"Support for PostgreSQL, MySQL, and more."})]})]})})]}),Ut=()=>{const[t,o]=u.useState(""),[r,m]=u.useState(""),[d,n]=u.useState(!1),[g,p]=u.useState(""),f=Ce(),{login:N}=Y(),x=async T=>{T.preventDefault(),p(""),n(!0);try{const D=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})}),k=await D.json();if(D.ok&&k.success){const M={id:k.data.user.id,email:k.data.user.email,first_name:k.data.user.firstName,last_name:k.data.user.lastName,role:"user"};N(M,k.data.token),f("/dashboard")}else p(k.error||"Login failed")}catch{p("Login failed. Please try again.")}finally{n(!1)}},S=(T,D)=>{o(T),m(D)};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Sign in to your account"}),g&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-600",children:g})}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:T=>o(T.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email",disabled:d})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:r,onChange:T=>m(T.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password",disabled:d})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-400 disabled:cursor-not-allowed",children:d?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(K,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up"})]})})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Test Account (click to use):"}),e.jsx("div",{className:"space-y-2",children:e.jsx("button",{type:"button",onClick:()=>S("test@example.com","password123"),className:"block w-full text-left text-xs text-blue-700 hover:text-blue-900 hover:bg-blue-100 p-2 rounded transition-colors",children:"test@example.com / password123"})})]})]})},zt=()=>{const t=o=>{o.preventDefault(),console.log("Register form submitted")};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Create your account"}),e.jsxs("form",{onSubmit:t,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First name"}),e.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"First name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last name"}),e.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Last name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Create a password"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create account"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(K,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})]})})})]})},Bt=()=>{const{user:t,token:o}=Y(),[r,m]=u.useState([]),[d,n]=u.useState(!0);u.useEffect(()=>{(async()=>{if(o)try{const S=await fetch("/api/diagrams",{headers:{Authorization:`Bearer ${o}`}});if(S.ok){const T=await S.json();m(T.data||[])}}catch(S){console.error("Error fetching diagrams:",S)}finally{n(!1)}})()},[o]);const g=[{name:"Total Diagrams",value:r.length.toString(),change:"+2.1%",changeType:"positive",icon:"📊"},{name:"Public Diagrams",value:r.filter(x=>x.visibility==="public").length.toString(),change:"+1",changeType:"positive",icon:"🌐"},{name:"Private Diagrams",value:r.filter(x=>x.visibility==="private").length.toString(),change:"+12%",changeType:"positive",icon:"🔒"},{name:"Recent Activity",value:r.filter(x=>new Date(x.updated_at)>new Date(Date.now()-7*24*60*60*1e3)).length.toString(),change:"0%",changeType:"neutral",icon:"📈"}],p=x=>{const S=new Date(x),D=new Date().getTime()-S.getTime(),k=Math.floor(D/(1e3*60*60)),M=Math.floor(k/24);return k<1?"Just now":k<24?`${k} hours ago`:M<7?`${M} days ago`:S.toLocaleDateString()},f=x=>{try{return x!=null&&x.tables?x.tables.length:0}catch{return 0}},N=[{name:"Create New Diagram",description:"Start with a blank canvas",icon:"➕",color:"bg-blue-500",link:"/editor"},{name:"Browse Templates",description:"Use pre-built schemas",icon:"📋",color:"bg-green-500",link:"/templates"},{name:"View All Diagrams",description:"Manage your diagrams",icon:"📊",color:"bg-purple-500",link:"/diagrams"},{name:"Profile Settings",description:"Update your profile",icon:"⚙️",color:"bg-orange-500",link:"/profile"}];return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",t==null?void 0:t.first_name,"! 👋"]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Here's what's happening with your database diagrams today."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:g.map(x=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:x.name}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.value})]}),e.jsx("div",{className:"text-3xl",children:x.icon})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("span",{className:`text-sm font-medium ${x.changeType==="positive"?"text-green-600":x.changeType==="negative"?"text-red-600":"text-gray-600"}`,children:[x.change," from last month"]})})]},x.name))}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:N.map(x=>e.jsxs(K,{to:x.link,className:"group bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-lg ${x.color} text-white text-xl mb-4 group-hover:scale-110 transition-transform duration-200`,children:x.icon}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.description})]},x.name))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Diagrams"}),e.jsx(K,{to:"/diagrams",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View all →"})]}),e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Diagram"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Database"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tables"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Modified"}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Edit"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Loading diagrams..."})}):r.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:["No diagrams yet. ",e.jsx(K,{to:"/editor",className:"text-blue-600 hover:text-blue-900",children:"Create your first diagram!"})]})}):r.slice(0,5).map(x=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.title}),x.description&&e.jsx("div",{className:"text-sm text-gray-500",children:x.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"PostgreSQL"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[f(x.canvas_data)," tables"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.visibility==="public"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:x.visibility})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p(x.updated_at)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx(K,{to:`/diagram/${x.id}`,className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>window.open(`/diagram/${x.id}`,"_blank"),className:"text-gray-600 hover:text-gray-900",children:"View"})]})]},x.id))})]})})]}),e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Activity"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flow-root",children:e.jsxs("ul",{className:"-mb-8",children:[e.jsx("li",{className:"relative pb-8",children:e.jsxs("div",{className:"relative flex space-x-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-500",children:e.jsx("svg",{className:"h-5 w-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"You"})," created a new diagram",e.jsx("span",{className:"font-medium text-gray-900",children:" E-commerce Database"})]}),e.jsx("p",{className:"mt-0.5 text-sm text-gray-500",children:"2 hours ago"})]})})]})}),e.jsx("li",{className:"relative pb-8",children:e.jsxs("div",{className:"relative flex space-x-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-500",children:e.jsx("svg",{className:"h-5 w-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"You"})," updated",e.jsx("span",{className:"font-medium text-gray-900",children:" User Management System"})]}),e.jsx("p",{className:"mt-0.5 text-sm text-gray-500",children:"1 day ago"})]})})]})}),e.jsx("li",{className:"relative",children:e.jsxs("div",{className:"relative flex space-x-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-purple-500",children:e.jsx("svg",{className:"h-5 w-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"You"})," used template",e.jsx("span",{className:"font-medium text-gray-900",children:" Blog System"})]}),e.jsx("p",{className:"mt-0.5 text-sm text-gray-500",children:"3 days ago"})]})})]})})]})})})]})]})})},Ht=()=>{const[t,o]=u.useState([]),[r,m]=u.useState([]),[d,n]=u.useState(!0),[g,p]=u.useState(!1),[f,N]=u.useState(null),[x,S]=u.useState("yii2"),[T,D]=u.useState("app"),[k,M]=u.useState({name:"",description:"",database_type:"postgresql"});u.useEffect(()=>{le(),ie()},[]);const le=async()=>{try{const b=await fetch("/api/diagrams",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){const I=await b.json();o(I.diagrams||[])}}catch(b){console.error("Error fetching diagrams:",b)}finally{n(!1)}},ie=async()=>{try{const b=await fetch("/api/export/frameworks",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){const I=await b.json();m(I.frameworks||[])}}catch(b){console.error("Error fetching frameworks:",b)}},C=async()=>{try{(await fetch("/api/diagrams",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(k)})).ok&&(p(!1),M({name:"",description:"",database_type:"postgresql"}),le())}catch(b){console.error("Error creating diagram:",b)}},J=async b=>{var I;try{N(b);const V=await fetch(`/api/export/${x}/${b}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({namespace:T})});if(V.ok){const te=await V.blob(),A=window.URL.createObjectURL(te),z=document.createElement("a");z.href=A;const F=V.headers.get("content-disposition"),ae=F?(I=F.split("filename=")[1])==null?void 0:I.replace(/"/g,""):`diagram_${x}_export.zip`;z.download=ae,document.body.appendChild(z),z.click(),window.URL.revokeObjectURL(A),document.body.removeChild(z)}else{const te=await V.json();alert(te.error||"Export failed")}}catch(V){console.error("Error exporting diagram:",V),alert("Export failed")}finally{N(null)}},ke=async b=>{if(confirm("Are you sure you want to delete this diagram?"))try{(await fetch(`/api/diagrams/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok&&le()}catch(I){console.error("Error deleting diagram:",I)}},oe=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return d?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Diagrams"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Create and manage your database diagrams"})]}),e.jsxs(Q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"New Diagram"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export Settings"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Framework"}),e.jsx("select",{value:x,onChange:b=>S(b.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 min-w-[120px]",children:r.map(b=>e.jsxs("option",{value:b.name,children:[b.info.name," ",b.info.version]},b.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Namespace"}),e.jsx("input",{type:"text",value:T,onChange:b=>D(b.target.value),placeholder:"app",className:"border border-gray-300 rounded-lg px-3 py-2 min-w-[120px]"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(b=>e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Qe,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:b.name}),e.jsx("p",{className:"text-sm text-gray-500",children:b.database_type})]})]})}),b.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:b.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-4",children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Updated ",oe(b.updated_at)]})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href=`/diagram/${b.id}`,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Diagram",children:e.jsx(Hs,{className:"h-4 w-4"})}),e.jsx(Q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href=`/diagram/${b.id}/edit`,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Diagram",children:e.jsx(qs,{className:"h-4 w-4"})}),e.jsx(Q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ke(b.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Diagram",children:e.jsx(Ie,{className:"h-4 w-4"})})]}),e.jsxs(Q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>J(b.id),disabled:f===b.id,className:"bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 text-sm disabled:opacity-50",children:[e.jsx(Re,{className:"h-4 w-4"}),f===b.id?"Exporting...":"Export"]})]})]},b.id))}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No diagrams yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first database diagram to get started"}),e.jsx(Q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Diagram"})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(Q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Diagram"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:k.name,onChange:b=>M({...k,name:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"My Database Schema"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:k.description,onChange:b=>M({...k,description:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Optional description",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database Type"}),e.jsxs("select",{value:k.database_type,onChange:b=>M({...k,database_type:b.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"postgresql",children:"PostgreSQL"}),e.jsx("option",{value:"mysql",children:"MySQL"}),e.jsx("option",{value:"sqlite",children:"SQLite"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create"})]})]})})]})})},es=()=>{const{id:t}=Ls(),o=Ce(),[r,m]=u.useState([]),[d,n]=u.useState([]),[g,p]=u.useState(!1),[f,N]=u.useState(""),[x,S]=u.useState(null),[T,D]=u.useState(null),[k,M]=u.useState({x:0,y:0}),[le,ie]=u.useState(!1),[C,J]=u.useState(null),[ke,oe]=u.useState(!1),[b,I]=u.useState(null),[V,te]=u.useState(!1),[A,z]=u.useState("Untitled Diagram"),[F,ae]=u.useState(null),[_,W]=u.useState("idle"),[re,ns]=u.useState(!0),[ne,de]=u.useState(!1),[Se,Le]=u.useState(!1),[ce,De]=u.useState(!1),[v,ge]=u.useState("framework"),[j,L]=u.useState({framework:"yii2",namespace:"xbsoft\\untitled_diagram",schemaName:"public",databaseType:"postgresql",generateMigration:!0,generateModel:!0,generateRepository:!0,selectedTables:[],skipExistingEntities:!0,documentTitle:""});u.useEffect(()=>{console.log("Export type changed to:",v)},[v]),u.useEffect(()=>{if(ce&&(!j.documentTitle||j.documentTitle==="")){const s=A||"Database Schema Documentation";L(a=>({...a,documentTitle:s}))}},[ce,A,j.documentTitle]);const[me,Ee]=u.useState([]),[fe,xe]=u.useState(null),be=u.useRef(null),{token:O,isAuthenticated:ds}=Y(),cs=s=>{const a=s.map(i=>{const c=i.priority||999;return{table:i,priority:c}});return a.sort((i,c)=>i.priority-c.priority),a.map(i=>i.table)},ye=s=>{const a=s.map(y=>{const P=y.priority||999;return{table:y,priority:P}});a.sort((y,P)=>y.priority-P.priority);const l=a.map(y=>y.table),i=[],c=new Set,h=new Set,w=l.filter(y=>!d.some(P=>P.fromTable===y.name));for(const y of w)c.has(y.name)||(c.add(y.name),i.push(y));const E=y=>{if(h.has(y.name)||c.has(y.name))return;h.add(y.name);const P=d.filter(B=>B.fromTable===y.name).map(B=>s.find(je=>je.name===B.toTable)).filter(B=>B!==void 0);for(const B of P)E(B);h.delete(y.name),c.add(y.name),i.push(y)},R=s.filter(y=>d.some(P=>P.fromTable===y.name));for(const y of R)E(y);return i},Oe=s=>{let a=s.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_").replace(/^[^a-zA-Z]/,"d");return a.length>0&&(a=a.charAt(0).toLowerCase()+a.slice(1)),`xbsoft\\${a}`};u.useEffect(()=>{console.log("Diagram name changed to:",A);const s=Oe(A);console.log("Generated namespace:",s),L(a=>({...a,namespace:s}))},[A]),u.useEffect(()=>{if(ce&&r.length>0){console.log("Export modal opened, diagram name:",A),console.log("Current export config namespace:",j.namespace),console.log("Current export type:",v),ge("framework"),(!A||A==="Untitled Diagram")&&(console.log("Diagram name is undefined, attempting to fetch diagram data..."),F&&O&&Ue(F));const s=r.map(l=>l.name);L(l=>({...l,selectedTables:s}));const a=[...r].sort((l,i)=>{const c=l.priority||999,h=i.priority||999;return c-h});Ee(a)}},[ce,r,d]),u.useEffect(()=>{if(r.length>0){const s=[...r].sort((l,i)=>{const c=l.priority||999,h=i.priority||999;return c-h}),a=cs(s);console.log("🔍 Table sorting debug:",{original:r.map(l=>l.name),prioritySorted:s.map(l=>`${l.name} (P${l.priority||"no priority"})`),finalSorted:a.map(l=>`${l.name} (P${l.priority||"no priority"})`),relationships:d.map(l=>`${l.fromTable} → ${l.toTable}`)}),Ee(s)}},[r,d]);const Ue=async s=>{if(O)try{const a=await fetch(`/api/diagrams/${s}`,{headers:{Authorization:`Bearer ${O}`}});if(a.ok){const i=(await a.json()).data;console.log("Diagram data:",i),console.log("Diagram title:",i.title),console.log("Diagram name:",i.name),console.log("Canvas data:",i.canvas_data);const c=i.title||i.name||i.diagram_name||"Untitled Diagram";if(console.log("Final diagram name:",c),z(c),ae(i.id),i.canvas_data){const h=typeof i.canvas_data=="string"?JSON.parse(i.canvas_data):i.canvas_data;if(console.log("Parsed canvas data:",h),console.log("Tables from canvas:",h.tables),h.tables){const w=h.tables.map((E,R)=>({...E,priority:E.priority||R+1}));console.log("Tables with priority:",w),m(w)}h.relationships&&n(h.relationships)}de(!1)}else console.error("Failed to load diagram")}catch(a){console.error("Error loading diagram:",a)}};u.useEffect(()=>{t&&O?Ue(t):t||(m([]),n([]),z("Untitled Diagram"),ae(null),de(!1))},[t,O]),u.useEffect(()=>{const s=a=>{a.ctrlKey&&a.key==="s"&&(a.preventDefault(),_!=="saving"&&Pe())};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[_]),u.useEffect(()=>{if(!re||!ne||!F)return;const s=setTimeout(()=>{_==="idle"&&Pe()},3e4);return()=>clearTimeout(s)},[r,d,A,re,ne,F,_]),u.useEffect(()=>{de(!0)},[r,d,A]);const ze=()=>{if(f.trim()){const s=r.length+1,a={id:`${f}-table`,name:f,x:100+r.length*50,y:150+r.length*50,priority:s,columns:[{id:`${f}-id`,name:"id",type:"UUID",isPrimaryKey:!0,isForeignKey:!1,isNullable:!1},{id:`${f}-created_by`,name:"created_by",type:"INTEGER",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0},{id:`${f}-updated_by`,name:"updated_by",type:"INTEGER",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0},{id:`${f}-created_at`,name:"created_at",type:"INTEGER",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0},{id:`${f}-updated_at`,name:"updated_at",type:"INTEGER",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0},{id:`${f}-deleted_by`,name:"deleted_by",type:"INTEGER",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0},{id:`${f}-deleted_at`,name:"deleted_at",type:"INTEGER",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0},{id:`${f}-is_deleted`,name:"is_deleted",type:"BOOLEAN",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0},{id:`${f}-status`,name:"status",type:"INTEGER",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0}]};m([...r,a]),N(""),p(!1)}},ms=s=>{const a={id:`${s}-${Date.now()}`,name:"new_column",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0};m(r.map(l=>l.id===s?{...l,columns:[...l.columns,a]}:l))},Z=(s,a,l)=>{m(r.map(i=>i.id===s?{...i,columns:i.columns.map(c=>c.id===a?{...c,...l}:c)}:i))},xs=(s,a)=>{const l=r.find(c=>c.id===s),i=l==null?void 0:l.columns.find(c=>c.id===a);l&&i&&n(d.filter(c=>!(c.fromTable===l.name&&c.fromColumn===i.name)&&!(c.toTable===l.name&&c.toColumn===i.name))),m(r.map(c=>c.id===s?{...c,columns:c.columns.filter(h=>h.id!==a)}:c))},us=(s,a)=>{m(r.map(l=>{if(l.id!==s)return l;const i=l.columns.findIndex(h=>h.id===a);if(i<=0)return l;const c=[...l.columns];return[c[i-1],c[i]]=[c[i],c[i-1]],{...l,columns:c}}))},ps=(s,a)=>{m(r.map(l=>{if(l.id!==s)return l;const i=l.columns.findIndex(h=>h.id===a);if(i>=l.columns.length-1)return l;const c=[...l.columns];return[c[i],c[i+1]]=[c[i+1],c[i]],{...l,columns:c}}))},hs=s=>{m(r.map(a=>a.id===s?{...a,isCollapsed:!a.isCollapsed}:a))},gs=s=>{m(r.filter(a=>a.id!==s)),n(d.filter(a=>a.fromTable!==s.replace("-table","")&&a.toTable!==s.replace("-table","")))},fs=(s,a,l,i)=>{const c=r.find(y=>y.id===s),h=r.find(y=>y.id===l),w=c==null?void 0:c.columns.find(y=>y.id===a),E=h==null?void 0:h.columns.find(y=>y.id===i);if(!c||!h||!w||!E)return;w.isForeignKey&&n(y=>y.filter(P=>!(P.toTable===c.name&&P.toColumn===w.name))),Z(s,a,{isForeignKey:!0,referencedTable:h.name,referencedColumn:E.name});const R={id:`rel-${Date.now()}`,fromTable:h.name,fromColumn:E.name,toTable:c.name,toColumn:w.name};n(y=>[...y,R])},bs=(s,a)=>{var h;if(s.preventDefault(),!r.find(w=>w.id===a))return;const i=s.currentTarget.getBoundingClientRect();(h=be.current)!=null&&h.getBoundingClientRect()&&(D(a),M({x:s.clientX-i.left,y:s.clientY-i.top}))},ys=s=>{if(!T||!be.current)return;const a=be.current.getBoundingClientRect(),l=Math.round(s.clientX-a.left-k.x),i=Math.round(s.clientY-a.top-k.y);m(r.map(c=>c.id===T?{...c,x:Math.max(0,l),y:Math.max(0,i)}:c))},Be=()=>{D(null),M({x:0,y:0})},He=(s,a)=>{const l=r.find(h=>h.id===s),i=l==null?void 0:l.columns.find(h=>h.id===a);let c={fromTableId:s,fromColumnId:a,toTableId:void 0,toColumnId:void 0};if(i!=null&&i.isForeignKey&&i.referencedTable&&i.referencedColumn){const h=r.find(E=>E.name===i.referencedTable),w=h==null?void 0:h.columns.find(E=>E.name===i.referencedColumn);h&&w&&(c.toTableId=h.id,c.toColumnId=w.id)}J(c),ie(!0)},js=()=>{C!=null&&C.fromTableId&&(C!=null&&C.fromColumnId)&&(C!=null&&C.toTableId)&&(C!=null&&C.toColumnId)&&fs(C.fromTableId,C.fromColumnId,C.toTableId,C.toColumnId),ie(!1),J(null)},qe=(s,a)=>{const l=r.find(y=>y.name===s);if(!l)return null;const i=l.columns.findIndex(y=>y.name===a);if(i===-1)return null;const c=50,h=32,w=16,E=300;if(l.isCollapsed){const y=l.y+c/2;return{x:Math.round(l.x+E+12),y:Math.round(y),leftX:Math.round(l.x-12),leftY:Math.round(y)}}const R=l.y+c+w+i*h+h/2;return{x:Math.round(l.x+E+12),y:Math.round(R),leftX:Math.round(l.x-12),leftY:Math.round(R)}},Ns=s=>{const a=d.find(l=>l.id===s);if(a){const l=r.find(c=>c.name===a.toTable),i=l==null?void 0:l.columns.find(c=>c.name===a.toColumn);l&&i&&Z(l.id,i.id,{isForeignKey:!1,referencedTable:void 0,referencedColumn:void 0})}n(d.filter(l=>l.id!==s))},vs=(s,a)=>{const l=r.find(c=>c.id===s),i=l==null?void 0:l.columns.find(c=>c.id===a);l&&i&&i.isForeignKey&&(n(c=>c.filter(h=>!(h.toTable===l.name&&h.toColumn===i.name))),Z(s,a,{isForeignKey:!1,referencedTable:void 0,referencedColumn:void 0}))},Pe=async()=>{var s;if(!ds||!O){W("error"),setTimeout(()=>W("idle"),3e3);return}te(!0),W("saving");try{const a={tables:r,relationships:d};console.log("Saving diagram with canvas data:",a),console.log("Tables being saved:",r);const l={title:A,canvas_data:JSON.stringify(a),description:`Database diagram with ${r.length} tables and ${d.length} relationships`},i=F?`/api/diagrams/${F}`:"/api/diagrams",h=await fetch(i,{method:F?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify(l)});if(h.ok){const w=await h.json();console.log("Diagram saved successfully:",w),!F&&((s=w.data)!=null&&s.id)&&ae(w.data.id),W("saved"),de(!1),setTimeout(()=>{W("idle")},2e3)}else{const w=await h.json();throw new Error(w.error||"Failed to save diagram")}}catch(a){console.error("Error saving diagram:",a),W("error"),setTimeout(()=>{W("idle")},3e3)}finally{te(!1)}},ws=(s,a)=>{L(l=>({...l,selectedTables:a?[...l.selectedTables,s]:l.selectedTables.filter(i=>i!==s)}))},Cs=()=>{const s=r.map(a=>a.name);L(a=>({...a,selectedTables:s}))},Ts=()=>{L(s=>({...s,selectedTables:[]}))},ks=(s,a)=>{xe(a),s.dataTransfer.effectAllowed="move"},Ss=s=>{s.preventDefault(),s.dataTransfer.dropEffect="move"},Ds=(s,a)=>{if(s.preventDefault(),!fe||fe===a){xe(null);return}const l=me.findIndex(w=>w.id===fe),i=me.findIndex(w=>w.id===a);if(l===-1||i===-1){xe(null);return}const c=[...me],[h]=c.splice(l,1);c.splice(i,0,h),Ee(c),xe(null)},Es=()=>{xe(null)},Ps=async()=>{if(!F||!O){alert("Please save the diagram first before exporting");return}if(console.log("Exporting diagram with type:",v),console.log("Diagram ID:",F),console.log("Export config:",j),console.log("Current exportType state:",v),!["framework","sql","pdf"].includes(v)){console.error("Invalid export type:",v),alert("Invalid export type. Please try again.");return}console.log(v==="sql"||v==="pdf"?"Using new export endpoints for:":"Using framework export endpoint for:",v),console.log("Final export type check:",v),Le(!0);try{let s,a;if(console.log("About to check export type. Current value:",v),console.log("Type of exportType:",typeof v),console.log('exportType === "sql":',v==="sql"),console.log('exportType === "pdf":',v==="pdf"),v==="sql"){const l=`/api/export/sql/${F}`;console.log("✅ SQL EXPORT: Making SQL export request to:",l),console.log("✅ SQL EXPORT: Request body:",{databaseType:j.databaseType,schemaName:j.schemaName}),s=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({databaseType:j.databaseType,schemaName:j.schemaName})}),a=`${A}_schema_${Date.now()}.sql`}else if(v==="pdf"){const l=`/api/export/pdf/${F}`;console.log("✅ PDF EXPORT: Making PDF export request to:",l),console.log("✅ PDF EXPORT: Request body:",{databaseType:j.databaseType,schemaName:j.schemaName,documentTitle:j.documentTitle}),s=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({databaseType:j.databaseType,schemaName:j.schemaName,documentTitle:j.documentTitle})}),a=`${A}_documentation_${Date.now()}.pdf`}else{console.log("🚨 FALLBACK TO FRAMEWORK EXPORT - This might be wrong!"),console.log("🚨 Export type was:",v);const l=`/api/export/${j.framework}/${F}`;console.log("🔧 FRAMEWORK EXPORT: Making Framework export request to:",l),console.log("🔧 FRAMEWORK EXPORT: Request body:",{namespace:j.namespace,schemaName:j.schemaName,generateMigration:j.generateMigration,generateModel:j.generateModel,generateRepository:j.generateRepository,selectedTables:j.selectedTables,skipExistingEntities:j.skipExistingEntities,tableOrder:ye(r).map(i=>i.name),tablesWithPriority:ye(r)}),s=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({namespace:j.namespace,schemaName:j.schemaName,generateMigration:j.generateMigration,generateModel:j.generateModel,generateRepository:j.generateRepository,selectedTables:j.selectedTables,skipExistingEntities:j.skipExistingEntities,tableOrder:ye(r).map(i=>i.name),tablesWithPriority:ye(r)})}),a=`${A}_generated_codes_${Date.now()}.zip`}if(s.ok){const l=s.headers.get("content-disposition");if(l){const w=l.match(/filename="(.+)"/);w&&(a=w[1])}const i=await s.blob(),c=window.URL.createObjectURL(i),h=document.createElement("a");h.href=c,h.download=a,document.body.appendChild(h),h.click(),window.URL.revokeObjectURL(c),document.body.removeChild(h),De(!1)}else{const l=await s.json();alert(`Export failed: ${l.error||"Unknown error"}`)}}catch(s){console.error("Export error:",s),alert("Export failed. Please try again.")}finally{Le(!1)}};return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-100",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 h-16 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between h-full px-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>{ne&&!confirm("You have unsaved changes. Are you sure you want to leave?")||o("/dashboard")},className:"flex items-center px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",title:"Dashboard",children:[e.jsx(Vs,{className:"w-4 h-4 mr-1"}),"Dashboard"]}),e.jsxs("button",{onClick:()=>{ne&&!confirm("You have unsaved changes. Are you sure you want to leave?")||o("/diagrams")},className:"flex items-center px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",title:"All Diagrams",children:[e.jsx(Ws,{className:"w-4 h-4 mr-1"}),"Diagrams"]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"•"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Diagram Editor"}),e.jsx("span",{className:"text-sm text-gray-500",children:"•"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:A,onChange:s=>z(s.target.value),className:"text-sm text-gray-700 bg-transparent border-none outline-none focus:bg-white focus:border focus:border-gray-300 focus:px-2 focus:py-1 focus:rounded",placeholder:"Diagram name"}),ne&&e.jsx("span",{className:"text-xs text-orange-600 font-medium",children:"•"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{confirm("Are you sure you want to create a new diagram? Unsaved changes will be lost.")&&(m([]),n([]),z("Untitled Diagram"),ae(null),W("idle"),de(!1))},className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"New"}),e.jsxs("button",{onClick:()=>ns(!re),className:`px-3 py-1 text-sm rounded-md transition-colors ${re?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 hover:bg-gray-200"}`,title:re?"Auto-save enabled":"Auto-save disabled",children:["Auto-save ",re?"✓":"✗"]}),e.jsx("button",{className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Share"}),e.jsxs("button",{onClick:()=>De(!0),disabled:!F,className:"flex items-center px-3 py-1 text-sm bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",title:F?"Export diagram code":"Save diagram first to export",children:[e.jsx(Re,{className:"w-4 h-4 mr-1"}),"Export"]}),e.jsxs("button",{onClick:Pe,disabled:V,className:`px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 flex items-center space-x-2 ${_==="saved"?"bg-green-600 hover:bg-green-700 text-white":_==="error"?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white disabled:bg-blue-400 disabled:cursor-not-allowed"}`,children:[_==="saving"&&e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),_==="saved"&&e.jsx("span",{children:"✓"}),_==="error"&&e.jsx("span",{children:"✗"}),e.jsx("span",{children:_==="saving"?"Saving...":_==="saved"?"Saved!":_==="error"?"Error":F?"Update":"Save"})]})]})]})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 p-4 flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Database Tables"}),e.jsxs("button",{onClick:()=>p(!0),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors mb-4 flex items-center justify-center",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Add Table"]}),e.jsx("div",{className:"space-y-2",children:r.map(s=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("button",{onClick:()=>gs(s.id),className:"text-red-500 hover:text-red-700",children:e.jsx(Ie,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.columns.length," columns"]})]},s.id))})]}),e.jsx("div",{className:"flex-1 relative bg-gray-50 overflow-hidden",children:e.jsxs("div",{ref:be,className:"w-full h-full relative overflow-auto",style:{minWidth:"1200px",minHeight:"800px"},onMouseMove:ys,onMouseUp:Be,onMouseLeave:Be,children:[e.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:`
                  linear-gradient(to right, #e5e7eb 1px, transparent 1px),
                  linear-gradient(to bottom, #e5e7eb 1px, transparent 1px)
                `,backgroundSize:"20px 20px"}}),e.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-10",style:{minWidth:"1200px",minHeight:"800px"},children:d.map(s=>{const a=r.find(Ae=>Ae.name===s.fromTable),l=r.find(Ae=>Ae.name===s.toTable),i=qe(s.fromTable,s.fromColumn),c=qe(s.toTable,s.toColumn);if(!i||!c)return null;const h=(a==null?void 0:a.isCollapsed)||!1,w=(l==null?void 0:l.isCollapsed)||!1,E=i.x,R=i.y,y=c.leftX,P=c.leftY||c.y,B=y-E,je=P-R,As=Math.sqrt(B*B+je*je),Ve=Math.min(As*.3,100),Ks=E+Ve,Fs=R,Is=y-Ve,Rs=`M ${E} ${R} C ${Ks} ${Fs} ${Is} ${P} ${y} ${P}`,We=(E+y)/2;return e.jsxs("g",{children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`gradient-${s.id}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.8"}),e.jsx("stop",{offset:"50%",stopColor:"#8b5cf6",stopOpacity:"0.6"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.8"})]})}),e.jsx("path",{d:Rs,stroke:`url(#gradient-${s.id})`,strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0 2px 4px rgba(59, 130, 246, 0.3))"}),e.jsx("circle",{cx:E,cy:R,r:h?"4":"5",fill:h?"#e5e7eb":"#ffffff",stroke:h?"#9ca3af":"#3b82f6",strokeWidth:"2",filter:"drop-shadow(0 2px 4px rgba(59, 130, 246, 0.4))"}),h&&e.jsx("text",{x:E,y:R+1,textAnchor:"middle",fontSize:"6",fontWeight:"bold",fill:"#9ca3af",className:"pointer-events-none",children:"⋯"}),e.jsx("circle",{cx:y,cy:P,r:w?"4":"5",fill:w?"#e5e7eb":"#ffffff",stroke:w?"#9ca3af":"#3b82f6",strokeWidth:"2",filter:"drop-shadow(0 2px 4px rgba(59, 130, 246, 0.4))"}),w&&e.jsx("text",{x:y,y:P+1,textAnchor:"middle",fontSize:"6",fontWeight:"bold",fill:"#9ca3af",className:"pointer-events-none",children:"⋯"}),e.jsx("polygon",{points:`${y-8},${P-3} ${y-8},${P+3} ${y-2},${P}`,fill:"#3b82f6",stroke:"#ffffff",strokeWidth:"1"}),e.jsx("circle",{cx:We,cy:(R+P)/2,r:"10",fill:"#ffffff",stroke:"#ef4444",strokeWidth:"2",className:"cursor-pointer hover:fill-red-50",onClick:()=>Ns(s.id),filter:"drop-shadow(0 2px 4px rgba(239, 68, 68, 0.3))"}),e.jsx("text",{x:We,y:(R+P)/2+2,textAnchor:"middle",fontSize:"12",fontWeight:"bold",fill:"#ef4444",className:"cursor-pointer select-none pointer-events-none",children:"×"})]},`${s.fromTable}-${s.toTable}-${s.fromColumn}-${s.toColumn}`)})}),r.map(s=>e.jsxs("div",{className:`absolute bg-white rounded-lg shadow-lg border-2 min-w-64 ${T===s.id?"border-blue-500 shadow-xl":"border-gray-200"}`,style:{left:Math.round(s.x),top:Math.round(s.y),cursor:T===s.id?"grabbing":"grab",zIndex:s.isCollapsed?20:30},onMouseDown:a=>bs(a,s.id),children:[e.jsxs("div",{className:"text-white px-4 py-2 rounded-t-lg flex items-center justify-between",style:{backgroundColor:s.color||"#2563eb"},children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),hs(s.id)},className:"text-white hover:bg-blue-700 p-1 rounded",title:s.isCollapsed?"Expand table":"Collapse table",children:s.isCollapsed?e.jsx(Qs,{className:"w-4 h-4"}):e.jsx(Xe,{className:"w-4 h-4"})}),e.jsx("h3",{className:"font-semibold",children:s.name}),s.priority&&e.jsxs("span",{className:"text-xs bg-yellow-200 text-yellow-800 px-1 rounded ml-1",children:["P",s.priority]}),s.isCollapsed&&e.jsxs("span",{className:"text-xs text-blue-200",children:["(",s.columns.length," columns)"]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),I(s),oe(!0)},className:"text-white hover:bg-blue-700 p-1 rounded",title:"Edit table",children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),ms(s.id)},className:"text-white hover:bg-blue-700 p-1 rounded",title:"Add Column",children:e.jsx(Fe,{className:"w-4 h-4"})})]})]}),!s.isCollapsed&&e.jsx("div",{className:"p-0",children:s.columns.map((a,l)=>e.jsxs("div",{className:`px-4 py-2 border-b border-gray-100 last:border-b-0 flex items-center justify-between hover:bg-gray-50 ${a.isPrimaryKey?"bg-yellow-50":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("span",{className:`font-medium ${a.isPrimaryKey?"text-yellow-700":"text-gray-700"}`,children:a.name}),e.jsx("span",{className:"text-xs text-gray-500 uppercase",children:a.type}),a.isPrimaryKey&&e.jsx("span",{className:"text-xs bg-yellow-200 text-yellow-800 px-1 rounded",children:"PK"}),!a.isNullable&&e.jsx("span",{className:"text-xs text-red-600",children:"NOT NULL"}),a.isForeignKey&&e.jsxs("span",{className:"text-xs bg-green-200 text-green-800 px-1 rounded",children:["FK → ",a.referencedTable,".",a.referencedColumn]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),S({tableId:s.id,columnId:a.id})},className:"text-gray-400 hover:text-blue-600 p-1",title:"Edit Column",children:e.jsx(Ge,{className:"w-3 h-3"})}),a.isForeignKey?e.jsx("button",{onClick:i=>{i.stopPropagation(),vs(s.id,a.id)},className:"text-gray-400 hover:text-orange-600 p-1",title:"Remove Foreign Key",children:"🔓"}):e.jsx("button",{onClick:i=>{i.stopPropagation(),He(s.id,a.id)},className:"text-gray-400 hover:text-green-600 p-1",title:"Create Foreign Key",children:"🔗"}),a.isForeignKey&&e.jsx("button",{onClick:i=>{i.stopPropagation(),He(s.id,a.id)},className:"text-gray-400 hover:text-blue-600 p-1",title:"Edit Foreign Key",children:"✏️"}),e.jsx("button",{onClick:i=>{i.stopPropagation(),us(s.id,a.id)},className:"text-gray-400 hover:text-blue-600 p-1",title:"Move Column Up",disabled:l===0,children:e.jsx(Xs,{className:"w-3 h-3"})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),ps(s.id,a.id)},className:"text-gray-400 hover:text-blue-600 p-1",title:"Move Column Down",disabled:l===s.columns.length-1,children:e.jsx(Xe,{className:"w-3 h-3"})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),xs(s.id,a.id)},className:"text-gray-400 hover:text-red-600 p-1",title:"Delete Column",children:e.jsx(Ie,{className:"w-3 h-3"})})]})]},a.id))})]},s.id))]})})]}),le&&C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:(()=>{const s=r.find(l=>l.id===C.fromTableId),a=s==null?void 0:s.columns.find(l=>l.id===C.fromColumnId);return a!=null&&a.isForeignKey?"Update Foreign Key Relationship":"Create Foreign Key Relationship"})()}),(()=>{var l;const s=r.find(i=>i.id===C.fromTableId),a=s==null?void 0:s.columns.find(i=>i.id===C.fromColumnId);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s==null?void 0:s.name,".",a==null?void 0:a.name," (",a==null?void 0:a.type,")"]}),(a==null?void 0:a.isForeignKey)&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Currently: FK → ",a.referencedTable,".",a.referencedColumn]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Table"}),e.jsxs("select",{value:C.toTableId||"",onChange:i=>J({...C,toTableId:i.target.value,toColumnId:void 0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Select table..."}),r.filter(i=>i.id!==C.fromTableId).map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),C.toTableId&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Column"}),e.jsxs("select",{value:C.toColumnId||"",onChange:i=>J({...C,toColumnId:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"Select column..."}),(l=r.find(i=>i.id===C.toTableId))==null?void 0:l.columns.filter(i=>i.isPrimaryKey||i.type===(a==null?void 0:a.type)).map(i=>e.jsxs("option",{value:i.id,children:[i.name," (",i.type,") ",i.isPrimaryKey?"(PK)":""]},i.id))]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:js,disabled:!C.toTableId||!C.toColumnId,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:a!=null&&a.isForeignKey?"Update Relationship":"Create Relationship"}),e.jsx("button",{onClick:()=>{ie(!1),J(null)},className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]})})()]})}),ke&&b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Table"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Table Name"}),e.jsx("input",{type:"text",value:b.name,onChange:s=>I({...b,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("input",{type:"number",min:"0",value:b.priority||"",onChange:s=>I({...b,priority:parseInt(s.target.value)||void 0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter priority (0 = highest)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower number = higher priority (0 = first, 1 = second, etc.)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Header Color"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"color",value:b.color||"#2563eb",onChange:s=>I({...b,color:s.target.value}),className:"w-12 h-8 border border-gray-300 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:b.color||"#2563eb",onChange:s=>I({...b,color:s.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md",placeholder:"#2563eb"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose a color for the table header"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>{m(r.map(s=>s.id===b.id?b:s)),oe(!1),I(null)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"}),e.jsx("button",{onClick:()=>{oe(!1),I(null)},className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Column"}),(()=>{const s=r.find(l=>l.id===x.tableId),a=s==null?void 0:s.columns.find(l=>l.id===x.columnId);return a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Column Name"}),e.jsx("input",{type:"text",value:a.name,onChange:l=>Z(x.tableId,x.columnId,{name:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Type"}),e.jsxs("select",{value:a.type,onChange:l=>Z(x.tableId,x.columnId,{type:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"VARCHAR",children:"VARCHAR"}),e.jsx("option",{value:"TEXT",children:"TEXT"}),e.jsx("option",{value:"INTEGER",children:"INTEGER"}),e.jsx("option",{value:"BIGINT",children:"BIGINT"}),e.jsx("option",{value:"DECIMAL",children:"DECIMAL"}),e.jsx("option",{value:"BOOLEAN",children:"BOOLEAN"}),e.jsx("option",{value:"DATE",children:"DATE"}),e.jsx("option",{value:"TIMESTAMP",children:"TIMESTAMP"}),e.jsx("option",{value:"UUID",children:"UUID"}),e.jsx("option",{value:"JSON",children:"JSON"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.isPrimaryKey,onChange:l=>Z(x.tableId,x.columnId,{isPrimaryKey:l.target.checked}),className:"mr-2"}),"Primary Key"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!a.isNullable,onChange:l=>Z(x.tableId,x.columnId,{isNullable:!l.target.checked}),className:"mr-2"}),"Not Null"]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>S(null),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"}),e.jsx("button",{onClick:()=>S(null),className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]}):null})()]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Table"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Table Name"}),e.jsx("input",{type:"text",value:f,onChange:s=>N(s.target.value),placeholder:"Enter table name",className:"w-full px-3 py-2 border border-gray-300 rounded-md",onKeyPress:s=>s.key==="Enter"&&ze()})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:ze,disabled:!f.trim(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Add Table"}),e.jsx("button",{onClick:()=>{p(!1),N("")},className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]})]})}),ce&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-[700px] max-h-[85vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export Diagram"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Type"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>{console.log("Setting export type to Framework"),ge("framework"),console.log("Export type set to:","framework")},className:`p-3 rounded-lg border-2 text-center transition-colors ${v==="framework"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"⚙️"}),e.jsx("div",{className:"text-sm font-medium",children:"Framework Code"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Generate application code"})]}),e.jsxs("button",{onClick:()=>{console.log("Setting export type to SQL"),ge("sql"),console.log("Export type set to:","sql")},className:`p-3 rounded-lg border-2 text-center transition-colors ${v==="sql"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"🗄️"}),e.jsx("div",{className:"text-sm font-medium",children:"SQL Schema"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Generate database schema"})]}),e.jsxs("button",{onClick:()=>{console.log("Setting export type to PDF"),ge("pdf"),console.log("Export type set to:","pdf")},className:`p-3 rounded-lg border-2 text-center transition-colors ${v==="pdf"?"border-red-500 bg-red-50 text-red-700":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"📄"}),e.jsx("div",{className:"text-sm font-medium",children:"PDF Documentation"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Generate documentation"})]})]})]}),(v==="sql"||v==="pdf")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database Type"}),e.jsxs("select",{value:j.databaseType,onChange:s=>L({...j,databaseType:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"postgresql",children:"PostgreSQL"}),e.jsx("option",{value:"mysql",children:"MySQL"}),e.jsx("option",{value:"sqlserver",children:"SQL Server"}),e.jsx("option",{value:"mariadb",children:"MariaDB"})]})]}),v==="framework"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Framework"}),e.jsx("select",{value:j.framework,onChange:s=>L({...j,framework:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:e.jsx("option",{value:"yii2",children:"Yii2 Framework"})})]}),v==="framework"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Namespace"}),e.jsx("input",{type:"text",value:j.namespace,onChange:s=>L({...j,namespace:s.target.value}),placeholder:Oe(A),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Schema Name"}),e.jsx("input",{type:"text",value:j.schemaName,onChange:s=>L({...j,schemaName:s.target.value}),placeholder:"public",className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:v==="framework"?`Tables will be prefixed with this schema name (e.g., ${j.schemaName}.table_name)`:`Database schema name for ${v.toUpperCase()} export`})]}),v==="pdf"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Title"}),e.jsx("input",{type:"text",value:j.documentTitle,onChange:s=>L({...j,documentTitle:s.target.value}),placeholder:A||"Database Schema Documentation",className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Title that will appear at the top of the PDF document"})]}),v==="framework"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Tables (Drag to reorder for migration creation order)"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{type:"button",onClick:Cs,className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Select All"}),e.jsx("button",{type:"button",onClick:Ts,className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Deselect All"})]})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-300 rounded-md p-3 space-y-2",children:(console.log("🔍 Export modal orderedTables:",me.map(s=>`${s.name} (P${s.priority||"no priority"})`)),me.map((s,a)=>e.jsxs("div",{draggable:!0,onDragStart:l=>ks(l,s.id),onDragOver:Ss,onDrop:l=>Ds(l,s.id),onDragEnd:Es,className:`flex items-center p-2 rounded-md border-2 border-dashed transition-colors ${fe===s.id?"border-blue-400 bg-blue-50 opacity-50":"border-transparent hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("div",{className:"mr-3 cursor-move text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M7 2a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM7 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM7 14a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM13 2a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM13 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM13 14a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})})}),e.jsx("div",{className:"mr-3 w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-xs font-medium text-gray-600",children:a+1}),e.jsxs("label",{className:"flex items-center flex-1 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.selectedTables.includes(s.name),onChange:l=>ws(s.name,l.target.checked),className:"mr-2"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[s.name," (",s.columns.length," columns)",s.priority&&e.jsxs("span",{className:"text-xs bg-yellow-200 text-yellow-800 px-1 rounded ml-1",children:["P",s.priority]})]})]})]},s.id)))}),e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"💡 Drag tables to reorder. Tables will be created in this order to avoid foreign key dependency issues."})]}),v==="framework"&&e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:j.skipExistingEntities,onChange:s=>L({...j,skipExistingEntities:s.target.checked}),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Skip existing entities (prevent conflicts with other modules)"})]})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>{console.log("Export button clicked, current export type:",v),Ps()},disabled:Se||v==="framework"&&j.selectedTables.length===0,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-purple-300 disabled:cursor-not-allowed flex items-center justify-center",children:Se?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),v==="framework"&&`Export & Download (${j.selectedTables.length} tables)`,v==="sql"&&"Export SQL Schema",v==="pdf"&&"Export PDF Documentation"]})}),e.jsx("button",{onClick:()=>De(!1),disabled:Se,className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 disabled:cursor-not-allowed",children:"Cancel"})]})]})]})})]})},qt=()=>{const t=Ce(),{token:o,isAuthenticated:r}=Y(),m=[{id:"ecommerce",name:"E-commerce Store",description:"Complete schema for online store with products, orders, users, and payments",database:"PostgreSQL",tableCount:8,category:"Business",color:"bg-blue-100 text-blue-800",tables:[{id:"users-table",name:"users",x:50,y:100,columns:[{id:"users-id",name:"id",type:"UUID",isPrimaryKey:!0,isForeignKey:!1,isNullable:!1},{id:"users-email",name:"email",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"users-first_name",name:"first_name",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"users-last_name",name:"last_name",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"users-password_hash",name:"password_hash",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"users-created_at",name:"created_at",type:"TIMESTAMP",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1}]},{id:"products-table",name:"products",x:400,y:100,columns:[{id:"products-id",name:"id",type:"UUID",isPrimaryKey:!0,isForeignKey:!1,isNullable:!1},{id:"products-name",name:"name",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"products-description",name:"description",type:"TEXT",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0},{id:"products-price",name:"price",type:"DECIMAL",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"products-stock",name:"stock",type:"INTEGER",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"products-category_id",name:"category_id",type:"UUID",isPrimaryKey:!1,isForeignKey:!0,isNullable:!1,referencedTable:"categories",referencedColumn:"id"}]},{id:"categories-table",name:"categories",x:750,y:100,columns:[{id:"categories-id",name:"id",type:"UUID",isPrimaryKey:!0,isForeignKey:!1,isNullable:!1},{id:"categories-name",name:"name",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"categories-description",name:"description",type:"TEXT",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0}]},{id:"orders-table",name:"orders",x:50,y:400,columns:[{id:"orders-id",name:"id",type:"UUID",isPrimaryKey:!0,isForeignKey:!1,isNullable:!1},{id:"orders-user_id",name:"user_id",type:"UUID",isPrimaryKey:!1,isForeignKey:!0,isNullable:!1,referencedTable:"users",referencedColumn:"id"},{id:"orders-total_amount",name:"total_amount",type:"DECIMAL",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"orders-status",name:"status",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"orders-created_at",name:"created_at",type:"TIMESTAMP",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1}]},{id:"order_items-table",name:"order_items",x:400,y:400,columns:[{id:"order_items-id",name:"id",type:"UUID",isPrimaryKey:!0,isForeignKey:!1,isNullable:!1},{id:"order_items-order_id",name:"order_id",type:"UUID",isPrimaryKey:!1,isForeignKey:!0,isNullable:!1,referencedTable:"orders",referencedColumn:"id"},{id:"order_items-product_id",name:"product_id",type:"UUID",isPrimaryKey:!1,isForeignKey:!0,isNullable:!1,referencedTable:"products",referencedColumn:"id"},{id:"order_items-quantity",name:"quantity",type:"INTEGER",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"order_items-price",name:"price",type:"DECIMAL",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1}]}],relationships:[{id:"rel-1",fromTable:"categories",fromColumn:"id",toTable:"products",toColumn:"category_id"},{id:"rel-2",fromTable:"users",fromColumn:"id",toTable:"orders",toColumn:"user_id"},{id:"rel-3",fromTable:"orders",fromColumn:"id",toTable:"order_items",toColumn:"order_id"},{id:"rel-4",fromTable:"products",fromColumn:"id",toTable:"order_items",toColumn:"product_id"}]},{id:"blog",name:"Blog System",description:"Blog platform with posts, comments, categories, and user management",database:"MySQL",tableCount:5,category:"Content",color:"bg-green-100 text-green-800",tables:[{id:"users-table",name:"users",x:50,y:100,columns:[{id:"users-id",name:"id",type:"UUID",isPrimaryKey:!0,isForeignKey:!1,isNullable:!1},{id:"users-username",name:"username",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"users-email",name:"email",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"users-password_hash",name:"password_hash",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"users-role",name:"role",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1}]},{id:"posts-table",name:"posts",x:400,y:100,columns:[{id:"posts-id",name:"id",type:"UUID",isPrimaryKey:!0,isForeignKey:!1,isNullable:!1},{id:"posts-title",name:"title",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"posts-content",name:"content",type:"TEXT",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"posts-author_id",name:"author_id",type:"UUID",isPrimaryKey:!1,isForeignKey:!0,isNullable:!1,referencedTable:"users",referencedColumn:"id"},{id:"posts-category_id",name:"category_id",type:"UUID",isPrimaryKey:!1,isForeignKey:!0,isNullable:!1,referencedTable:"categories",referencedColumn:"id"},{id:"posts-published_at",name:"published_at",type:"TIMESTAMP",isPrimaryKey:!1,isForeignKey:!1,isNullable:!0}]},{id:"categories-table",name:"categories",x:750,y:100,columns:[{id:"categories-id",name:"id",type:"UUID",isPrimaryKey:!0,isForeignKey:!1,isNullable:!1},{id:"categories-name",name:"name",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"categories-slug",name:"slug",type:"VARCHAR",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1}]},{id:"comments-table",name:"comments",x:400,y:400,columns:[{id:"comments-id",name:"id",type:"UUID",isPrimaryKey:!0,isForeignKey:!1,isNullable:!1},{id:"comments-post_id",name:"post_id",type:"UUID",isPrimaryKey:!1,isForeignKey:!0,isNullable:!1,referencedTable:"posts",referencedColumn:"id"},{id:"comments-author_id",name:"author_id",type:"UUID",isPrimaryKey:!1,isForeignKey:!0,isNullable:!1,referencedTable:"users",referencedColumn:"id"},{id:"comments-content",name:"content",type:"TEXT",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1},{id:"comments-created_at",name:"created_at",type:"TIMESTAMP",isPrimaryKey:!1,isForeignKey:!1,isNullable:!1}]}],relationships:[{id:"rel-1",fromTable:"users",fromColumn:"id",toTable:"posts",toColumn:"author_id"},{id:"rel-2",fromTable:"categories",fromColumn:"id",toTable:"posts",toColumn:"category_id"},{id:"rel-3",fromTable:"posts",fromColumn:"id",toTable:"comments",toColumn:"post_id"},{id:"rel-4",fromTable:"users",fromColumn:"id",toTable:"comments",toColumn:"author_id"}]}],d=async n=>{if(!r||!o){alert("Please login to use templates");return}try{const g={title:n.name,canvas_data:JSON.stringify({tables:n.tables,relationships:n.relationships}),description:n.description},p=await fetch("/api/diagrams",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(g)});if(p.ok){const f=await p.json();t(`/diagram/${f.data.id}`)}else alert("Failed to create diagram from template")}catch(g){console.error("Error creating diagram:",g),alert("Failed to create diagram from template")}};return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Database Templates"}),e.jsx("p",{className:"text-gray-600",children:"Start your project with pre-built database schemas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.map(n=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:n.name}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:n.category})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${n.color}`,children:n.database})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:n.description}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium",children:n.tableCount})," tables"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium",children:n.relationships.length})," relationships"]})]})}),e.jsx("button",{onClick:()=>d(n),className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Use Template"})]},n.id)),e.jsxs("div",{className:"bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-6 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"📋"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"More Templates Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-500",children:"We're working on more database templates for different use cases"})]})]})]})})},Vt=()=>e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Profile Settings"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Personal Information"})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",defaultValue:"John",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",defaultValue:"Doe",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",defaultValue:"john@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),e.jsx("input",{type:"text",id:"company",name:"company",defaultValue:"Acme Corp",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{id:"bio",name:"bio",rows:4,defaultValue:"Database architect and full-stack developer with 10+ years of experience.",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium",children:"Save Changes"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mt-8",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Account Settings"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",id:"newPassword",name:"newPassword",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium",children:"Update Password"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Danger Zone"}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-red-600 mb-4",children:"Once you delete your account, there is no going back. Please be certain."}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm font-medium",children:"Delete Account"})]})]})]})]})]})}),Wt=()=>e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-32 w-32 text-gray-400 mb-8",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"w-full h-full",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.291-1.002-5.824-2.651M15 17H9m6-2v2a2 2 0 01-2 2H9a2 2 0 01-2-2v-2m8-2V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})})}),e.jsx("h1",{className:"text-6xl font-bold text-gray-900 mb-4",children:"404"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Sorry, the page you are looking for doesn't exist or has been moved. Let's get you back to creating amazing database diagrams!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(K,{to:"/",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-sm font-medium transition-colors",children:"Go Home"}),e.jsx(K,{to:"/dashboard",className:"bg-white hover:bg-gray-50 text-gray-900 px-6 py-3 rounded-lg text-sm font-medium border border-gray-300 transition-colors",children:"Go to Dashboard"})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Popular pages:"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm",children:[e.jsx(K,{to:"/diagrams",className:"text-blue-600 hover:text-blue-800",children:"My Diagrams"}),e.jsx(K,{to:"/templates",className:"text-blue-600 hover:text-blue-800",children:"Templates"}),e.jsx(K,{to:"/profile",className:"text-blue-600 hover:text-blue-800",children:"Profile"})]})]})]})}),e.jsx("div",{className:"mt-16 text-center",children:e.jsx("p",{className:"text-xs text-gray-400",children:"DrawSQL Clone - Professional Database Schema Designer"})})]}),Qt=()=>e.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif",backgroundColor:"#f0f0f0",minHeight:"100vh"},children:[e.jsx("h1",{style:{color:"#333",marginBottom:"20px"},children:"✅ React App is Working!"}),e.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx("h2",{children:"System Status:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["✅ React: ",ts.version]}),e.jsx("li",{children:"✅ Component rendering: Working"}),e.jsx("li",{children:"✅ CSS: Loading"}),e.jsx("li",{children:"✅ JavaScript: Executing"})]}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsx("button",{onClick:()=>alert("Button works!"),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Test Button"})}),e.jsxs("div",{style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:["Current time: ",new Date().toLocaleString()]})]})]}),ue=({children:t})=>{const{user:o,isAuthenticated:r,isLoading:m}=Y();return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):!r||!o?e.jsx(as,{to:"/login",replace:!0}):e.jsx(e.Fragment,{children:t})},ss=({children:t})=>{const{isAuthenticated:o,isLoading:r}=Y();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):o?e.jsx(as,{to:"/dashboard",replace:!0}):e.jsx(e.Fragment,{children:t})};function Xt(){const{initializeAuth:t}=Y();return u.useEffect(()=>{t()},[t]),e.jsx("div",{className:"App",children:e.jsxs(Os,{children:[e.jsx(U,{path:"/",element:e.jsx(Ot,{})}),e.jsx(U,{path:"/test",element:e.jsx(Qt,{})}),e.jsx(U,{path:"/templates",element:e.jsx(qt,{})}),e.jsx(U,{path:"/login",element:e.jsx(ss,{children:e.jsx(Ze,{children:e.jsx(Ut,{})})})}),e.jsx(U,{path:"/register",element:e.jsx(ss,{children:e.jsx(Ze,{children:e.jsx(zt,{})})})}),e.jsx(U,{path:"/dashboard",element:e.jsx(ue,{children:e.jsx(Ke,{children:e.jsx(Bt,{})})})}),e.jsx(U,{path:"/diagrams",element:e.jsx(ue,{children:e.jsx(Ke,{children:e.jsx(Ht,{})})})}),e.jsx(U,{path:"/diagram/:id",element:e.jsx(ue,{children:e.jsx(es,{})})}),e.jsx(U,{path:"/editor",element:e.jsx(ue,{children:e.jsx(es,{})})}),e.jsx(U,{path:"/profile",element:e.jsx(ue,{children:e.jsx(Ke,{children:e.jsx(Vt,{})})})}),e.jsx(U,{path:"*",element:e.jsx(Wt,{})})]})})}const Gt=new $s({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1},mutations:{retry:1}}});$e.createRoot(document.getElementById("root")).render(e.jsx(ts.StrictMode,{children:e.jsx(Ms,{client:Gt,children:e.jsxs(Us,{children:[e.jsx(Xt,{}),e.jsx(Lt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",borderRadius:"8px",fontSize:"14px",fontWeight:"500"},success:{iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}));
//# sourceMappingURL=index-CJV6N6yg.js.map
